---
import heroClientUrl from "./heroHorizontal.client.ts?url";
const VIDEO_URL = "https://assets.jeronimonunez.com/video/backgroundHero.mp4";
const NOISE_URL = "https://assets.jeronimonunez.com/img/noise.png";
---

<section data-hero class="hero" aria-label="Hero">
  <div data-type-layer class="sticky">
    <div data-track class="track">
      <!-- PANEL 1 -->
      <section class="panel" data-word="INTRO" aria-label="Intro">
        <div class="container">
          <!-- <p class="eyebrow">Frontend Architecture · Security-by-Design · Fintech Systems</p> -->
          <!-- <h1 class="title">Diseño y construyo sistemas digitales de alta confianza.</h1> -->
           <p class="eyebrow">UX/UI | Arquitectura Frontend | Security-by-Design </p> 
           <h1 class="title"> Sistemas frontend <br>listos para produccion.</h1>
          <p class="subtitle">
            Arquitectura modular, estado predecible e integracion robusta con backend.
            <!-- Arquitectura frontend, contratos tipados y security-by-design para fintech y productos regulados. -->
          </p>

          <div class="actions">
            <a class="btn btn--primary" href="#proyecto-secure-banking">Ver Proyectos</a>
            <a class="btn btn--ghost" href="#contacto">Contactar</a>
          </div>

          <div class="chips" aria-label="Highlights">
            <!-- <span class="chip">Typed contracts (Zod/OpenAPI)</span>
            <span class="chip">Auth & session hardening</span>
            <span class="chip">OWASP + STRIDE modeling</span>
            <span class="chip">CI/CD + observability</span> -->
            <span class="chip">Astro</span>
            <span class="chip">React</span>
            <span class="chip">TypeScript</span>
            <span class="chip">REST APIs</span>
            <span class="chip">Component Architecture</span>
          </div>
        </div>
      </section>

      <!-- PANEL 2 -->
      <section class="panel" data-word="ARCHITECT" aria-label="Arquitectura">
        <div class="container twoCol">
          <div>
            <p class="kicker">01 · Arquitectura</p>
            <h2 class="panelTitle">BFF + contratos tipados</h2>
            <p class="panelText">
              Evito el “drift” entre frontend y backend con contratos tipados y validación en runtime.
              Menos bugs silenciosos. Más previsibilidad.
            </p>
          </div>

          <ul class="panelList" aria-label="Detalles de arquitectura">
            <li>Zod schemas + OpenAPI</li>
            <li>UI contracts + design tokens</li>
            <li>Perf budgets + SSR/Islands</li>
            <li>Cache + invalidación clara</li>
          </ul>
        </div>
      </section>

      <!-- PANEL 3 -->
      <section class="panel" data-word="PROJECTS" aria-label="Seguridad y producto">
        <div class="container twoCol">
          <div>
            <p class="kicker">02 · Seguridad</p>
            <h2 class="panelTitle">Threat modeling aplicado</h2>
            <p class="panelText">
              Identifico riesgos antes de codear: auth, sesiones, enumeración, errores y logging.
              Seguridad sin frenar el delivery.
            </p>
          </div>

          <ul class="panelList" aria-label="Controles de seguridad">
            <li>Rate-limit + anti brute force</li>
            <li>JWT/Refresh: rotación + expiración corta</li>
            <li>CSP, HSTS, headers</li>
            <li>Errores sin filtración + logging seguro</li>
          </ul>
        </div>
      </section>

      <!-- PANEL 4 -->
      <section class="panel" data-word="VISION" aria-label="Gobernanza">
        <div class="container twoCol">
          <div>
            <p class="kicker">03 · Gobernanza</p>
            <h2 class="panelTitle">Decisiones trazables</h2>
            <p class="panelText">
              Documento decisiones y riesgos para equipos grandes: menos ambigüedad, mejor alineación,
              auditoría y escalabilidad organizacional.
            </p>
          </div>

          <ul class="panelList" aria-label="Señales C-level">
            <li>ADRs + diagramas + riesgos</li>
            <li>RBAC, auditoría, least privilege</li>
            <li>Observabilidad: métricas + trazas</li>
            <li>Roadmap: cloud + security posture</li>
          </ul>
        </div>
      </section>
    </div>
  </div>

  <!-- VIDEO layer -->
  <div data-video-layer class="video-layer" aria-hidden="true">
    <video
      data-video
      class="bgVideo"
      muted
      playsinline
      webkit-playsinline
      preload="metadata"
      crossorigin="anonymous"
    >
      <source src={VIDEO_URL} type="video/mp4" />
    </video>
    <!-- <div class="bgOverlay"></div> -->
    <!-- <div class="bgNoise" style={`background-image:url(${NOISE_URL})`}></div> -->
  </div>
</section>

<script type="module" src={heroClientUrl}></script>

<style>
  .hero {
    position: relative;
    height: 400vh;
    overflow: clip;
    color: #fff;
  }

  .sticky {
    position: sticky;
    top: 0;
    height: 100vh;
    overflow: hidden;
    z-index: 2;
  }

  .track {
    display: flex;
    height: 100%;
    width: 400vw;
    will-change: transform;
    transform: translate3d(0,0,0);
  }

  /* Fondo video full screen */
  .video-layer {
    position: fixed; /* <- clave: siempre cubre viewport */
    inset: 0;
    z-index: 1;
    pointer-events: none;
  }

  .bgVideo {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover; 
    transform: translateZ(0);
    will-change: contents;
  }

  .bgOverlay {
    display: none;
    position: absolute;
    inset: 0;
    background:
      radial-gradient(1200px 600px at 20% 30%, rgba(0,0,0,0.35), rgba(0,0,0,0.86)),
      linear-gradient(to bottom, rgba(0,0,0,0.55), rgba(0,0,0,0.92));
  }

  .bgNoise {
    display: none;
    position: absolute;
    inset: 0;
    opacity: 0.06;
    background-image: url("https://assets.jeronimonunez.com/img/noise.png");
    background-size: 320px 320px;
    mix-blend-mode: overlay;
  }

  .panel {
    width: 100vw;
    height: 100vh;
    display: grid;
    align-items: center;
    background: transparent;
  }

  .container {
    width: min(1120px, calc(100% - 3rem));
    margin: 0 auto;
  }

  .twoCol {
    display: flex;
    gap: clamp(1.25rem, 3vw, 3rem);
    align-items: flex-start;
  }
  .twoCol > * { flex: 1; }

  .eyebrow {
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-size: 0.85rem;
    opacity: 0.85;
    margin: 0 0 0.75rem;
  }

  .title {
    font-size: clamp(2.2rem, 4.6vw, 4.2rem);
    line-height: 1.02;
    margin: 0 0 1rem;
    max-width: 22ch;
  }

  .subtitle {
    font-size: clamp(1.05rem, 1.2vw, 1.2rem);
    line-height: 1.55;
    opacity: 0.88;
    max-width: 72ch;
    margin: 0 0 1.5rem;
  }

  .kicker {
    opacity: 0.8;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    font-size: 0.85rem;
    margin: 0 0 0.75rem;
  }

  .panelTitle {
    font-size: clamp(2rem, 3.5vw, 3.2rem);
    line-height: 1.05;
    margin: 0 0 0.9rem;
    max-width: 24ch;
  }

  .panelText {
    opacity: 0.88;
    font-size: 1.05rem;
    line-height: 1.6;
    max-width: 70ch;
    margin: 0;
  }

  .panelList {
    margin: 2.25rem 0 0;
    padding-left: 1.1rem;
    opacity: 0.92;
    line-height: 1.9;
  }

  .actions {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
    margin-bottom: 1.25rem;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 44px;
    padding: 0 1.05rem;
    border-radius: 999px;
    font-weight: 600;
    text-decoration: none;
    border: 1px solid rgba(255,255,255,0.18);
    backdrop-filter: blur(10px);
  }

  .btn--primary {
    background: rgba(255,255,255,0.92);
    color: #0a0a0a;
    border-color: rgba(255,255,255,0.35);
  }

  .btn--ghost {
    background: rgba(0,0,0,0.18);
    color: #fff;
  }

  .chips {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    opacity: 0.95;
  }

  .chip {
    font-size: 0.9rem;
    padding: 0.4rem 0.7rem;
    border-radius: 999px;
    background: rgba(0,0,0,0.22);
    border: 1px solid rgba(255,255,255,0.14);
  }

  @media (max-width: 820px) {
    .twoCol { flex-direction: column; }
    .panelList { margin-top: 1rem; }
  }

  @media (prefers-reduced-motion: reduce) {
    .video-layer { display: none; }
  }
</style>